# Spring Security概述：本地化
Spring Security支持终端用户可能看到的异常消息的本地化。如果您的应用程序是为英语用户设计的，那么您不需要做任何事情，因为默认情况下所有的安全消息都是英语。如果您需要支持其他地区，请阅读本章内容。

所有异常消息都可以本地化，包括与身份验证失败和被拒绝访问相关的消息。关注于开发人员或系统部署人员的异常和日志消息（包括不正确的属性、接口合同违规、使用不正确的构造函数、启动时间验证、调试级日志记录）不是本地化的，而是在Spring Security的代码中硬编码的。

在spring-security-core-xx.jar包中，有一个org.springframework.security包。它包含了一个messages.properties文件，同时也有一些其他的常见语言的本地化版本。这些消息文件应该由你的ApplicationContext来引用，因为Spring Security类实现了Spring MessageSourceAware接口，并期望消息解析器在应用程序上下文启动时被注入依赖项。通常，您所需要做的就是在应用程序上下文中注册一个bean来引用消息。下面是一个例子：

```xml
<bean id="messageSource"
	class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
<property name="basename" value="classpath:org/springframework/security/messages"/>
</bean>
```
messages.properties文件的命名和标准的resource bundles的命名方式一致，并且代表了默认的语言。这个文件默认是英文的。

如果你想自定义messages.properties文件，或者支持其他语言，你应该复制messages.properties文件，根据实际情况重命名该文件，然后在bean里面进行注册（就像上面的代码一样）。这个文件中没有多少内容，所以本地化的工作量并不是很大。如果您确实执行了这个文件的本地化，请考虑与社区共享您的工作，通过记录一个JIRA任务，并附加您的适当命名的messages.properties的本地化版本。

Spring Security依赖于Spring的本地化支持来实际查找适当的消息。为了使其生效，您需要把来自请求的区域设置存储在Spring的org.springframework.context.i18n.LocaleContextHolder中。虽然Spring MVC的DispatcherServlet会自动为您的应用程序做这些事情，但是由于Spring Security的过滤器在DispatcherServlet做这些事前就被调用了，所以在调用过滤器之前，需要给LocaleContextHolder设置正确的区域设置。你可以自己在过滤器实现（这必须在web.xml的Spring Security过滤器之前出现），或者使用Spring的RequestContextFilter。关于使用Spring的本地化，请参考Spring框架文档。
